"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){"use strict";return this.slice(0,a.length)===a});var App=function(){"use strict";function a(a){f.conversation.push({speaker:"jarvis",text:a}),$('<div class="jarvis">'+a+"</div>").hide().appendTo("#conversation").fadeIn(200)}function b(a){f.conversation.push({speaker:"jarvis",text:a}),$(a).hide().appendTo("#conversation").fadeIn(200)}function c(a){var b=a.toLowerCase().split(",").join("");return b=a.toLowerCase().split("?").join(""),("jarvis"===b.split(" ")[0]||"jervis"===b.split(" ")[0])&&(b=b.replace("jarvis ",""),b=b.replace("jervis ","")),b=b.split("fuck").join("f**k"),b=b.split("shit").join("s**t"),b=b.split("underscore").join("_"),b=b.split("what's").join("what is"),console.log("Parsed string: "+b),b}function d(a){for(var b=0;b<f.modules.length;b++)for(var c=0;c<f.allModules.length;c++)f.modules[b]===c&&f.allModules[b].parse(a)}console.log("Beginning of app.");var e,f,g,h;return e=f=h={},window.SpeechRecognition=window.speechRecognition||window.webkitSpeechRecognition||!1,f.recognition=window.SpeechRecognition?new SpeechRecognition:!1,f.result=!1,f.conversation=[],f.modules=[0],f.allModules=[{name:"core",description:"Includes all basic features for Jarvis. Only mandatory module."},{name:"webdev",description:"Includes features for web developers and web designers, such as docs for popular libraries, placeholder text/images, and trending dev news."},{name:"random",description:"Includes basic random generators, including coin flips, dice rolls and others."}],f.allModules[0].parse=function(c){var d;if(-1!==c.indexOf("f**k")||-1!==c.indexOf("s**t"))d=new Howl({urls:["assets/module-specific/audio/Core/No-Swearing.wav"]}).play(),a("Hey! No swearing!");else if("who are you"===c||"what are you"===c||"what do you do"===c)d=new Howl({urls:["assets/module-specific/audio/Core/I-Am.wav"]}).play(),a("I am Jarvis, an intelligent voice-powered virtual personal assistant. I'm basically Siri for the web, but more extensible, and open-source too.");else if("what time is it"===c||"what time is it now"===c||"what is the time"===c)a("The time is <b>"+moment().format("h:mm A")+"</b>.");else if("i love you"===c||"i like you"===c)d=new Howl({urls:["assets/module-specific/audio/Core/Ditto.wav"]}).play(),a("Ditto.");else if("make me a sandwich"===c)d=new Howl({urls:["assets/module-specific/audio/Core/Sandwich.wav"]}).play(),a("Poof! You're a sandwich!");else if("hello"===c||"hey"===c||"hi"===c||"hello jarvis"===c||"hey jarvis"===c||"hi jarvis"===c){var e,f=["Hello.","Hey.","Hi."][Math.floor(3*Math.random())];switch(f){case"Hello.":e="assets/module-specific/audio/Core/Hello.wav";break;case"Hey.":e="assets/module-specific/audio/Core/Hey.wav";break;case"Hi.":e="assets/module-specific/audio/Core/Hi.wav"}d=new Howl({urls:[e],onend:function(){new Howl({urls:["assets/module-specific/audio/Core/Assistance.wav"]}).play()}}).play(),a(f+" May I be of assistance?")}else if(c.startsWith("go to "))console.log("go to");else if("what is trending on r"===c.split("/")[0]||"what is hot on r"===c.split("/")[0]||"what is new on r"===c.split("/")[0]||"what is interesting on r"===c.split("/")[0]){var g="/hot.json?limit=10",h="s";"what is new on r"===c.split("/")[0]&&(g="/new.json?limit=10"),$.getJSON("https://www.reddit.com/r/"+c.split("/")[1].split(" ").join("")+g,function(d){for(var e='<div class="list"><div class="title"><b>trending</b> on <a href="https://www.reddit.com/r/'+c.split("/")[1].split(" ").join("")+'"><b>r/'+c.split("/")[1].split(" ").join("")+"</b></a></div>",f=0,g=d.data.children.length;g>f;f++)d.data.children[f].data.stickied||(1===d.data.children[f].data.num_comments?h="":1!==d.data.children[f].data.num_comments&&(h="s"),e+='<div class="item"><div class="title"><a href="'+d.data.children[f].data.url+'">'+d.data.children[f].data.title+'</a></div> <div class="meta">'+d.data.children[f].data.score+' points | <a href="https://www.reddit.com'+d.data.children[f].data.permalink+'">'+d.data.children[f].data.num_comments+" comment"+h+"</a> | "+moment.unix(d.data.children[f].data.created_utc).fromNow()+"</div></div>");e+="</div>";var i,j=["I believe this is what you requested.","Here you go.","Got it. Here you go."][Math.floor(3*Math.random())];switch(j){case"I believe this is what you requested.":i="assets/module-specific/audio/Core/Request.wav";break;case"Here you go.":i="assets/module-specific/audio/Core/Here-you-go.wav";break;case"Got it. Here you go.":i="assets/module-specific/audio/Core/Got-It.wav"}new Howl({urls:[i]}).play();a(j),b(e)}).fail(function(b,c,d){$("#result").empty(),console.log("reddit failed");var e;"Forbidden"===d?(a("It appears the subreddit you are trying to access is private. Sorry."),e="assets/module-specific/audio/Core/Subreddit-Private.wav"):"Not Found"===d?(a("I don't think that subreddit exists. Sorry."),e="assets/module-specific/audio/Core/Subreddit-Exists.wav"):"error"!==c||d||(a("I wasn't able to do that. It's possible that the subreddit doesn't exist. Sorry."),e="assets/module-specific/audio/Core/Subreddit-Unknown.wav");new Howl({urls:[e]}).play()})}else c.startsWith("should i watch")&&$.ajax({type:"GET",url:"http://www.omdbapi.com/?t="+encodeURIComponent(c.split("should i watch ").join(""))+"&plot=short&r=json&tomatoes=true"}).done(function(c){var d=$.parseJSON(c);if("Movie not found!"!==d.Error||"episode"===d.Type){"movie"===d.Type?d.type="Film":"series"===d.Type&&(d.type="TV Series");var e='<div class="reviews">',f=0,g=0;"N/A"!==d.imdbRating&&(e+='<div class="review">IMDB: '+d.imdbRating+"/10</div>",f+=10*parseFloat(d.imdbRating),g++),"N/A"!==d.tomatoMeter&&(e+='<div class="review">Rotten Tomatoes: '+d.tomatoMeter+"/100</div>",f+=parseFloat(d.tomatoMeter),g++),"N/A"!==d.Metascore&&(e+='<div class="review">Metacritic: '+d.Metascore+"/100</div>",f+=parseFloat(d.Metascore),g++),e+='<div class="review">Average: '+Math.round(f/g*100)/100+"%</div></div>";{var h='<div class="movie box"><div class="title">'+d.Title+'</div><div class="subtitle">'+d.Year+" "+d.type+'</div><div class="description">'+d.Plot+"</div>"+e+"</div>";new Howl({urls:["assets/module-specific/audio/Core/What-I-Could-Find.wav"]}).play()}a("Here is what I could find:"),b(h)}else a("Sorry, I couldn't find that movie.")})},f.allModules[1].parse=function(c){if("what is trending on hacker news"===c||"what is hot on hacker news"===c)$.getJSON("http://hnify.herokuapp.com/get/top/",function(c){for(var d="s",e='<div class="list"><div class="title"><b>trending</b> on <a href="https://news.ycombinator.com/"><b>Hacker News</b></a></div>',f=0;10>f;f++)d=1===c.stories[f].num_comments?"":"s",e+='<div class="item"><div class="title"><a href="'+c.stories[f].link+'">'+c.stories[f].title+'</a></div><div class="meta">'+c.stories[f].points+' points | <a href="'+c.stories[f].comments_link+'">'+c.stories[f].num_comments+" comment"+d+"</a> | "+c.stories[f].published_time+"</div></div>";var g,h=["I believe this is what you requested.","Here you go.","Got it. Here you go."][Math.floor(3*Math.random())];switch(h){case"I believe this is what you requested.":g="assets/module-specific/audio/Core/Request.wav";break;case"Here you go.":g="assets/module-specific/audio/Core/Here-you-go.wav";break;case"Got it. Here you go.":g="assets/module-specific/audio/Core/Got-It.wav"}new Howl({urls:[g]}).play();a(h),b(e)});else if(c.startsWith("get me the docs for ")||c.startsWith("get me the documentation for ")){var d;c.startsWith("get me the docs for ")?d="get me the docs for ":c.startsWith("get me the documentation for ")&&(d="get me the documentation for "),$.getJSON("assets/module-specific/webdev-docs.json",function(b){if(console.log(typeof b[c.split(d).slice(1)[0]]),"string"==typeof b[c.split("get me the docs for ").slice(1)[0]]){{new Howl({urls:["assets/module-specific/audio/Core/Here-you-go.wav"]}).play()}a('Here you go: <a href="'+b[c.split("get me the docs for ").slice(1)[0]]+'">'+b[c.split("get me the docs for ").slice(1)[0]]+"</a>")}else a("I don't know about that library. Sorry.")})}},$('input[type="checkbox"]').change(function(){$(this).toggleClass("checked"),f.modules=[0];for(var a=0,b=$(".checked").length;b>a;a++)f.modules.push(parseInt($(".checked")[a].id.slice(9)));console.log(f.modules)}),$("#input").keypress(function(a){13===a.keyCode&&($("#conversation div").fadeOut(100,function(){$(this).remove()}),setTimeout(function(){f.conversation.push({speaker:"user",text:'<div class="user">'+$("#input").val().charAt(0).toUpperCase()+$("#input").val().slice(1)+"</div>"}),$('<div class="user">'+$("#input").val().charAt(0).toUpperCase()+$("#input").val().slice(1)+"</div>").hide().appendTo("#conversation").fadeIn(200),setTimeout(function(){d(c($("#input").val()))},500)},200))}),f.recognition?(console.log("Speech recognition is supported in this browser."),f.recognition.onstart=function(){console.log("Recognition started."),$("#microphone-button").addClass("recording"),$("#microphone-button .fa").addClass("recording")},f.recognition.onresult=function(a){a.results[0][0].confidence>.6?(f.result=!0,console.log("Recognition result detected."),$("#conversation div").fadeOut(100,function(){$(this).remove()}),setTimeout(function(){var b={speaker:"user"};b.text=a.results[0][0].transcript.charAt(0).toUpperCase()+a.results[0][0].transcript.slice(1),f.conversation.push(b),console.log("User said '"+b.text+"'."),$('<div class="user">'+b.text+"</div>").hide().appendTo("#conversation").fadeIn(200),setTimeout(function(){$("#loading").fadeIn(500),d(c(b.text)),$("#loading").fadeOut(500)},500)},200)):console.log("Result rejected, due to lack of confidence. Condidence: "+a.results[0][0].confidence)},f.recognition.onend=function(){if($("#microphone-button").removeClass("recording"),$("#microphone-button .fa").removeClass("recording"),!f.result){var b,c,d=["Could you repeat that again?","Sorry, do you mind repeating that again?"][Math.floor(2*Math.random())];switch(d){case"Could you repeat that again?":c="assets/module-specific/audio/Core/Repeat1.wav";break;case"Sorry, do you mind repeating that again?":c="assets/module-specific/audio/Core/Repeat2.wav"}b=new Howl({urls:[c]}).play(),a(d),f.recognition.start()}f.result=!1,console.log("Recognition ended.")},g=function(){$("#microphone-button").hover(function(){$(this).addClass("hover"),$("#microphone-button .fa").addClass("hover")},function(){$(this).removeClass("hover"),$("#microphone-button .fa").removeClass("hover")}),$("#microphone-button").click(function(){f.recognition.start()})}):console.log("Speech recognition is not supported in this browser."),g(),e.globals=f,e.init=g,e};App();