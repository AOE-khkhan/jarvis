"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){"use strict";return this.slice(0,a.length)===a});var App=function(){"use strict";function a(a){e.conversation.push({speaker:"jarvis",text:a}),$("#result").html(a)}function b(a){var b=a.toLowerCase().split(",").join("");return("jarvis"===b.split(" ")[0]||"jervis"===b.split(" ")[0])&&(b=b.replace("jarvis","")),b=b.split("underscore").join("_"),b=b.split("what's").join("what is"),console.log("Parsed string: "+b),b}function c(a){for(var b=0;b<e.modules.length;b++)for(var c=0;c<e.allModules.length;c++)e.modules[b]===c&&e.allModules[b].parse(a)}console.log("Beginning of app.");var d,e,f,g;return d=e=g={},window.SpeechRecognition=window.speechRecognition||window.webkitSpeechRecognition||!1,e.recognition=window.SpeechRecognition?new SpeechRecognition:!1,e.result=!1,e.conversation=[],e.modules=[0],e.allModules=[{name:"core",description:"Includes all basic features for Jarvis. Only mandatory module."},{name:"webdev",description:"Includes features for web developers and web designers, such as docs for popular libraries, placeholder text/images, and trending dev news."}],e.allModules[0].parse=function(b){if("what time is it"===b||"what time is it now"===b)a(moment().format("h:mmA"));else if("what is trending on r"===b.split("/")[0]||"what is hot on r"===b.split("/")[0]||"what is new on r"===b.split("/")[0]||"what is interesting on r"===b.split("/")[0]){var c="/hot.json?limit=10",d="s";"what is new on r"===b.split("/")[0]&&(c="/new.json?limit=10"),$.getJSON("https://www.reddit.com/r/"+b.split("/")[1].split(" ").join("")+c,function(c){for(var e='<div class="list"><div class="title"><b>trending</b> on <a href="https://www.reddit.com/r/'+b.split("/")[1].split(" ").join("")+'"><b>r/'+b.split("/")[1].split(" ").join("")+"</b></a></div>",f=0,g=c.data.children.length;g>f;f++)c.data.children[f].data.stickied||(1===c.data.children[f].data.num_comments?d="":1!==c.data.children[f].data.num_comments&&(d="s"),e+='<div class="item"><div class="title"><a href="'+c.data.children[f].data.url+'">'+c.data.children[f].data.title+'</a></div> <div class="meta">'+c.data.children[f].data.score+' points | <a href="https://www.reddit.com'+c.data.children[f].data.permalink+'">'+c.data.children[f].data.num_comments+" comment"+d+"</a> | "+moment.unix(c.data.children[f].data.created_utc).fromNow()+"</div></div>");e+="</div>",a(e)}).fail(function(b,c,d){$("#result").empty(),console.log("reddit failed"),"Forbidden"===d?a("It appears the subreddit you are trying to access is private. Sorry."):"Not Found"===d?a("I don't think that subreddit exists. Sorry."):"error"!==c||d||a("I wasn't able to do that. It's possible that the subreddit doesn't exist. Sorry.")})}else if("calculate"===b.split(" ")[0]||"compute"===b.split(" ")[0]){var e=b.split(" ");"the"===b.split(" ")[1]&&(e=e.splice(1,1)),e=e.join("+"),$.get("https://www.calcatraz.com/calculator/api?c="+e,function(a){console.log(a)})}else b.startsWith("should i watch")&&(console.log(b.split("should i watch ").join("")),$.ajax({type:"POST",url:"https://byroredux-metacritic.p.mashape.com/find/movie?retry=4&title=Interstellar",headers:{"X-Mashape-Key":"ufgugDhX2Qmsh6AyUSNw0dDrsHRlp19B8MvjsnTrGDJw6NeQ8u","Content-Type":"application/x-www-form-urlencoded"}}).done(function(a){console.log(a)}))},e.allModules[1].parse=function(b){"what is trending on hacker news"===b||"what is hot on hacker news"===b?$.getJSON("http://hnify.herokuapp.com/get/top/",function(b){for(var c="s",d='<div class="list"><div class="title"><b>trending</b> on <a href="https://news.ycombinator.com/"><b>Hacker News</b></a></div>',e=0;10>e;e++)c=1===b.stories[e].num_comments?"":"s",d+='<div class="item"><div class="title"><a href="'+b.stories[e].link+'">'+b.stories[e].title+'</a></div><div class="meta">'+b.stories[e].points+' points | <a href="'+b.stories[e].comments_link+'">'+b.stories[e].num_comments+" comment"+c+"</a> | "+b.stories[e].published_time+"</div></div>";a(d)}):(1===b.split("get me the docs for").slice(1).length&&""!==b.split("get me the docs for ").slice(1)[0]||1===b.split("get me the documentation for").slice(1).length&&""!==b.split("get me the documentation for ").slice(1)[0])&&$.getJSON("assets/module-specific/webdev-docs.json",function(c){console.log(typeof c[b.split("get me the docs for ").slice(1)[0]]),a("string"==typeof c[b.split("get me the docs for ").slice(1)[0]]?'<a href="'+c[b.split("get me the docs for ").slice(1)[0]]+'">'+c[b.split("get me the docs for ").slice(1)[0]]+"</a>":"I don't know about that library. Sorry.")})},$('input[type="checkbox"]').change(function(){$(this).toggleClass("checked"),e.modules=[0];for(var a=0,b=$(".checked").length;b>a;a++)e.modules.push(parseInt($(".checked")[a].id.slice(9)));console.log(e.modules)}),$("#input").keypress(function(a){13===a.keyCode&&c(b($("#input").val()))}),e.recognition?(console.log("Speech recognition is supported in this browser."),e.recognition.onstart=function(){console.log("Recognition started.")},e.recognition.onresult=function(a){if(a.results[0][0].confidence>.6){e.result=!0,console.log("Recognition result detected.");var d={speaker:"user"};d.text=a.results[0][0].transcript.charAt(0).toUpperCase()+a.results[0][0].transcript.slice(1),e.conversation.push(d),console.log("User said '"+d.text+"'."),c(b(d.text))}else console.log("Result rejected, due to lack of confidence. Condidence: "+a.results[0][0].confidence)},e.recognition.onend=function(){e.result||(console.log("No result. Starting recognition again."),e.recognition.start()),e.result=!1,console.log("Recognition ended.")},f=function(){document.getElementById("microphone-button").addEventListener("click",function(){e.recognition.start()})}):console.log("Speech recognition is not supported in this browser."),f(),d.globals=e,d.init=f,d};App();