function number(a){"use strict";var b,c,d;21>a?b=new Howl({urls:["assets/module-specific/audio/number/"+a.toString()+".wav"]}).play():100>a?b=new Howl({urls:["assets/module-specific/audio/number/"+a.toString().charAt(0)+"0.wav"],onend:function(){"0"!==a.toString().charAt(1)&&(c=new Howl({urls:["assets/module-specific/audio/number/"+a.toString().charAt(1)+".wav"]}).play())}}).play():1e3>a&&(b=new Howl({urls:["assets/module-specific/audio/number/"+a.toString().charAt(0)+".wav"],onend:function(){c=new Howl({urls:["assets/module-specific/audio/number/100.wav"],onend:function(){a%100!==0&&(d=new Howl({urls:["assets/module-specific/audio/number/and.wav"],onend:function(){number(parseInt(a.toString().substring(1)))}}).play())}}).play()}}).play())}"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){"use strict";return this.slice(0,a.length)===a}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){"use strict";return-1!==this.indexOf(a,this.length-a.length)});var App=function(){"use strict";function a(a){f.conversation.push({speaker:"jarvis",text:a}),$('<div class="jarvis">'+a+"</div>").hide().appendTo("#conversation").fadeIn(200)}function b(a){f.conversation.push({speaker:"jarvis",text:a}),$(a).hide().appendTo("#conversation").fadeIn(200)}function c(a){var b=a.toLowerCase().split(",").join("");return b=a.toLowerCase().split("?").join(""),("jarvis"===b.split(" ")[0]||"jervis"===b.split(" ")[0])&&(b=b.replace("jarvis ",""),b=b.replace("jervis ","")),b=b.split("fuck").join("f**k"),b=b.split("shit").join("s**t"),b=b.split("bitch").join("b***h"),b=b.split("cunt").join("c**t"),b=b.split("asshole").join("a******"),b=b.split("asswipe").join("a******"),b=b.split("underscore").join("_"),b=b.split("what's").join("what is"),console.log("Parsed string: "+b),b}function d(b){for(var c=0;c<f.modules.length;c++)for(var d=0;d<f.allModules.length;d++)f.modules[c]===d&&f.allModules[c].parse(b);$("#loading").fadeOut(100),f.found===!1&&(a("Sorry, I couldn't figure out what you wanted me to do. I'll bring you to a Google Search instead."),sound1=new Howl({urls:["assets/module-specific/audio/Core/No-Go.wav"],onend:function(){a("Opening new tab in 3, 2, 1...");new Howl({urls:["assets/module-specific/audio/Core/New-Tab.wav"],onend:function(){window.open("https://www.google.ca/search?q="+b,"_blank")}}).play()}}).play(),a("Opening new tab in 3, 2, 1..."))}console.log("Beginning of app.");var e,f,g,h;return e=f=h={},window.SpeechRecognition=window.speechRecognition||window.webkitSpeechRecognition||!1,f.recognition=window.SpeechRecognition?new SpeechRecognition:!1,f.result=!1,f.conversation=[],f.found=!0,f.modules=[0],f.allModules=[{name:"core",description:"Includes all basic features for Jarvis. Only mandatory module."},{name:"webdev",description:"Includes features for web developers and web designers, such as docs for popular libraries, placeholder text/images, and trending dev news."},{name:"random",description:"Includes basic random generators, including coin flips, dice rolls and others."}],f.allModules[0].parse=function(c){var d,e,g,h;if(-1!==c.indexOf("f**k")||-1!==c.indexOf("s**t")||-1!==c.indexOf("b***h")||-1!==c.indexOf("c**t"))d=new Howl({urls:["assets/module-specific/audio/Core/No-Swearing.wav"]}).play(),a("Hey! No swearing!");else if("who are you"===c||"what are you"===c||"what do you do"===c)d=new Howl({urls:["assets/module-specific/audio/Core/I-Am.wav"]}).play(),a("I am Jarvis, an intelligent voice-powered virtual personal assistant. I'm basically Siri for the web, but more extensible, and open-source too.");else if("what time is it"===c||"what time is it now"===c||"what is the time"===c)d=new Howl({urls:["assets/module-specific/audio/Core/Time.wav"],onend:function(){e=new Howl({urls:["assets/module-specific/audio/number/"+parseInt(moment().format("h"))+".wav"],onend:function(){parseInt(moment().format("mm"))?parseInt(moment().format("mm"))<10?g=new Howl({urls:["assets/module-specific/audio/number/0 - 2.wav"],onend:function(){number(parseInt(moment().format("mm")))}}).play():number(moment().format("mm")):g=new Howl({urls:["assets/module-specific/audio/number/o-clock.wav"]}).play()}}).play()}}).play(),a("The time is <b>"+moment().format("h:mm A")+"</b>.");else if("i love you"===c||"i like you"===c)d=new Howl({urls:["assets/module-specific/audio/Core/Ditto.wav"]}).play(),a("Ditto.");else if("make me a sandwich"===c)d=new Howl({urls:["assets/module-specific/audio/Core/Sandwich.wav"]}).play(),a("Poof! You're a sandwich!");else if(c.startsWith("search")){var i;switch(c.split(" ").slice(1,c.split(" ").indexOf("for")).join(" ")){case"":case"google":i="https://www.google.com/search?q=";break;case"bing":i="https://www.bing.com/search?q=";break;case"google images":case"images":case"pictures":i="https://www.google.com/search?site=&tbm=isch&q=";break;case"youtube":case"video":case"videos":i="https://www.youtube.com/results?search_query=";break;case"vimeo":i="http://vimeo.com/search?q=";break;case"github":i="https://github.com/search?utf8=âœ“&q=";break;case"spotify":i="https://play.spotify.com/search/";break;case"duckduckgo":case"duck duck go":i="https://duckduckgo.com/?q=";break;case"flickr":case"flicker":i="https://www.flickr.com/search/?q=";break;case"behance":i="https://www.behance.net/search?search=";break;case"dribble":case"dribbble":i="https://dribbble.com/search?q=";break;case"wikipedia":i="https://en.wikipedia.org/wiki/";break;case"stack overflow":case"stackoverflow":case"stock overflow":i="http://stackoverflow.com/search?q=";break;case"soundcloud":case"sound cloud":i="https://soundcloud.com/search?q=";break;case"last.fm":case"last dot fm":case"last. fm":i="http://www.last.fm/search?q=";break;default:i="https://www.google.com/search?q="}var j=c.split(" ").slice(c.split(" ").indexOf("for")+1,c.split(" ").length).join(" ");d=new Howl({urls:["assets/module-specific/audio/Core/New-Tab.wav"],onend:function(){window.open(i+j,"_blank")}}).play(),a("Opening new tab in 3, 2, 1...")}else if(c.startsWith("go to ")||c.startsWith("goto "))c.startsWith("go to")?h=c.replace("go to ","").split(" ").join(""):c.startsWith("goto")&&(h=c.replace("goto ","").split(" ").join("")),-1===h.indexOf(".")&&(h+=".com"),d=new Howl({urls:["assets/module-specific/audio/Core/New-Tab.wav"],onend:function(){window.open("https://www."+h,"_blank")}}).play(),a("Opening new tab in 3, 2, 1...");else if("hello"===c||"hey"===c||"hi"===c||"hello jarvis"===c||"hey jarvis"===c||"hi jarvis"===c){var k=["Hello.","Hey.","Hi."][Math.floor(3*Math.random())];switch(k){case"Hello.":h="assets/module-specific/audio/Core/Hello.wav";break;case"Hey.":h="assets/module-specific/audio/Core/Hey.wav";break;case"Hi.":h="assets/module-specific/audio/Core/Hi.wav"}d=new Howl({urls:[h],onend:function(){new Howl({urls:["assets/module-specific/audio/Core/Assistance.wav"]}).play()}}).play(),a(k+" May I be of assistance?")}else if(c.startsWith("go to "))console.log("go to");else if("what is trending on r"===c.split("/")[0]||"what is hot on r"===c.split("/")[0]||"what is new on r"===c.split("/")[0]||"what is interesting on r"===c.split("/")[0]){var l="/hot.json?limit=10",m="s";"what is new on r"===c.split("/")[0]&&(l="/new.json?limit=10"),$.getJSON("https://www.reddit.com/r/"+c.split("/")[1].split(" ").join("")+l,function(d){for(var e='<div class="list"><div class="title"><b>trending</b> on <a href="https://www.reddit.com/r/'+c.split("/")[1].split(" ").join("")+'"><b>r/'+c.split("/")[1].split(" ").join("")+"</b></a></div>",f=0,g=d.data.children.length;g>f;f++)d.data.children[f].data.stickied||(1===d.data.children[f].data.num_comments?m="":1!==d.data.children[f].data.num_comments&&(m="s"),e+='<div class="item"><div class="title"><a href="'+d.data.children[f].data.url+'">'+d.data.children[f].data.title+'</a></div> <div class="meta">'+d.data.children[f].data.score+' points | <a href="https://www.reddit.com'+d.data.children[f].data.permalink+'">'+d.data.children[f].data.num_comments+" comment"+m+"</a> | "+moment.unix(d.data.children[f].data.created_utc).fromNow()+"</div></div>");e+="</div>";var h,i=["I believe this is what you requested.","Here you go.","Got it. Here you go."][Math.floor(3*Math.random())];switch(i){case"I believe this is what you requested.":h="assets/module-specific/audio/Core/Request.wav";break;case"Here you go.":h="assets/module-specific/audio/Core/Here-you-go.wav";break;case"Got it. Here you go.":h="assets/module-specific/audio/Core/Got-It.wav"}new Howl({urls:[h]}).play();a(i),b(e)}).fail(function(b,c,d){$("#result").empty(),console.log("reddit failed");var e;"Forbidden"===d?(a("It appears the subreddit you are trying to access is private. Sorry."),e="assets/module-specific/audio/Core/Subreddit-Private.wav"):"Not Found"===d?(a("I don't think that subreddit exists. Sorry."),e="assets/module-specific/audio/Core/Subreddit-Exists.wav"):"error"!==c||d||(a("I wasn't able to do that. It's possible that the subreddit doesn't exist. Sorry."),e="assets/module-specific/audio/Core/Subreddit-Unknown.wav");new Howl({urls:[e]}).play()})}else c.startsWith("should i watch")?$.ajax({type:"GET",url:"http://www.omdbapi.com/?t="+encodeURIComponent(c.split("should i watch ").join(""))+"&plot=short&r=json&tomatoes=true"}).done(function(c){var d=c;if("Movie not found!"!==d.Error||"episode"===d.Type){"movie"===d.Type?d.type="Film":"series"===d.Type&&(d.type="TV Series");var e='<div class="reviews">',f=0,g=0;"N/A"!==d.imdbRating&&(e+='<div class="review">IMDB: '+d.imdbRating+"/10</div>",f+=10*parseFloat(d.imdbRating),g++),"N/A"!==d.tomatoMeter&&(e+='<div class="review">Rotten Tomatoes: '+d.tomatoMeter+"/100</div>",f+=parseFloat(d.tomatoMeter),g++),"N/A"!==d.Metascore&&(e+='<div class="review">Metacritic: '+d.Metascore+"/100</div>",f+=parseFloat(d.Metascore),g++),e+='<br><div class="review">Average: '+Math.round(f/g*100)/100+"%</div></div>";{var h='<div class="movie box"><div class="title">'+d.Title+'</div><div class="subtitle">'+d.Year+" "+d.type+'</div><div class="description">'+d.Plot+"</div>"+e+"</div>";new Howl({urls:["assets/module-specific/audio/Core/What-I-Could-Find.wav"]}).play()}a("Here is what I could find:"),b(h)}else a("Sorry, I couldn't find that movie.")}):f.found=!1},f.allModules[1].parse=function(c){if("what is trending on hacker news"===c||"what is hot on hacker news"===c)$.getJSON("http://hnify.herokuapp.com/get/top/",function(c){for(var d="s",e='<div class="list"><div class="title"><b>trending</b> on <a href="https://news.ycombinator.com/"><b>Hacker News</b></a></div>',f=0;10>f;f++)d=1===c.stories[f].num_comments?"":"s",e+='<div class="item"><div class="title"><a href="'+c.stories[f].link+'">'+c.stories[f].title+'</a></div><div class="meta">'+c.stories[f].points+' points | <a href="'+c.stories[f].comments_link+'">'+c.stories[f].num_comments+" comment"+d+"</a> | "+c.stories[f].published_time+"</div></div>";var g,h=["I believe this is what you requested.","Here you go.","Got it. Here you go."][Math.floor(3*Math.random())];switch(h){case"I believe this is what you requested.":g="assets/module-specific/audio/Core/Request.wav";break;case"Here you go.":g="assets/module-specific/audio/Core/Here-you-go.wav";break;case"Got it. Here you go.":g="assets/module-specific/audio/Core/Got-It.wav"}new Howl({urls:[g]}).play();a(h),b(e)});else if(c.startsWith("get me the docs for ")||c.startsWith("get me the documentation for ")){var d;c.startsWith("get me the docs for ")?d="get me the docs for ":c.startsWith("get me the documentation for ")&&(d="get me the documentation for "),$.getJSON("assets/module-specific/webdev-docs.json",function(b){if(console.log(typeof b[c.split(d).slice(1)[0]]),"string"==typeof b[c.split("get me the docs for ").slice(1)[0]]){{new Howl({urls:["assets/module-specific/audio/Core/Here-you-go.wav"]}).play()}a('Here you go: <a href="'+b[c.split("get me the docs for ").slice(1)[0]]+'">'+b[c.split("get me the docs for ").slice(1)[0]]+"</a>")}else a("I don't know about that library. Sorry.")})}else f.found=!1},$('input[type="checkbox"]').change(function(){$(this).toggleClass("checked"),f.modules=[0];for(var a=0,b=$(".checked").length;b>a;a++)f.modules.push(parseInt($(".checked")[a].id.slice(9)));console.log(f.modules)}),$("#input").keypress(function(a){13===a.keyCode&&($("#conversation div").fadeOut(100,function(){$(this).remove()}),setTimeout(function(){f.conversation.push({speaker:"user",text:'<div class="user">'+$("#input").val().charAt(0).toUpperCase()+$("#input").val().slice(1)+"</div>"}),$('<div class="user">'+$("#input").val().charAt(0).toUpperCase()+$("#input").val().slice(1)+"</div>").hide().appendTo("#conversation").fadeIn(200),setTimeout(function(){$("#loading").fadeIn(100),d(c($("#input").val()))},500)},200))}),f.recognition?(console.log("Speech recognition is supported in this browser."),f.recognition.onstart=function(){console.log("Recognition started."),$("#microphone-button").addClass("recording"),$("#microphone-button .fa").addClass("recording")},f.recognition.onresult=function(a){a.results[0][0].confidence>.6?(f.result=!0,console.log("Recognition result detected."),$("#conversation div").fadeOut(100,function(){$(this).remove()}),setTimeout(function(){var b={speaker:"user"};b.text=a.results[0][0].transcript.charAt(0).toUpperCase()+a.results[0][0].transcript.slice(1),f.conversation.push(b),console.log("User said '"+b.text+"'."),$('<div class="user">'+b.text+"</div>").hide().appendTo("#conversation").fadeIn(200),setTimeout(function(){$("#loading").fadeIn(100),d(c(b.text))},500)},200)):console.log("Result rejected, due to lack of confidence. Condidence: "+a.results[0][0].confidence)},f.recognition.onend=function(){if($("#microphone-button").removeClass("recording"),$("#microphone-button .fa").removeClass("recording"),!f.result){var b,c,d=["Could you repeat that again?","Sorry, do you mind repeating that again?"][Math.floor(2*Math.random())];switch(d){case"Could you repeat that again?":c="assets/module-specific/audio/Core/Repeat1.wav";break;case"Sorry, do you mind repeating that again?":c="assets/module-specific/audio/Core/Repeat2.wav"}b=new Howl({urls:[c],onend:function(){f.recognition.start()}}).play(),a(d)}f.result=!1,console.log("Recognition ended.")},g=function(){$("#microphone-button").hover(function(){$(this).addClass("hover"),$("#microphone-button .fa").addClass("hover")},function(){$(this).removeClass("hover"),$("#microphone-button .fa").removeClass("hover")}),$("#microphone-button").click(function(){f.recognition.start()})}):console.log("Speech recognition is not supported in this browser."),g(),e.globals=f,e.init=g,e};App();